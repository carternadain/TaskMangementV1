generator client {

  provider = "prisma-client-js"

}

datasource db {

  provider = "sqlite"

  url      = env("DATABASE_URL")

}

model User {

  id        String   @id @default(cuid())

  email     String   @unique

  password  String

  role      Role     @default(USER)

  orgId     String

  createdAt DateTime @default(now())

  tasks     Task[]   @relation("CreatedBy")

  org       Organization @relation(fields: [orgId], references: [id])

  assignedTasks Task[] @relation("Assignee")

}

model Organization {

  id     String @id @default(cuid())

  name   String

  users  User[]

  tasks  Task[]

}

model Task {

  id          String   @id @default(cuid())

  title       String

  description String?

  status      TaskStatus @default(TODO)

  orgId       String

  createdById String

  assigneeId  String?

  createdAt   DateTime @default(now())

  org         Organization @relation(fields: [orgId], references: [id])

  createdBy   User     @relation("CreatedBy", fields: [createdById], references: [id])

  assignee    User?    @relation("Assignee", fields: [assigneeId], references: [id])

}

enum Role {

  ADMIN

  MANAGER

  USER

}

enum TaskStatus {

  TODO

  IN_PROGRESS

  DONE

}